<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Прогноз погоди</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  #weather, #forecast { margin-top: 20px; }
  .hour { border: 1px solid #ccc; padding: 10px; margin: 5px; display: inline-block; width: 120px; text-align: center; border-radius: 6px; background: #f9f9f9; }
  img { max-width: 100%; }
</style>
</head>
<body>

<h1>Прогноз погоди</h1>
<input type="text" id="city" placeholder="Введіть місто">
<button id="searchBtn">Пошук</button>

<div id="weather"></div>
<div id="forecast"></div>

<script>
const API_KEY = "2da8a5445f5e298b2a06124454341761";

// Отримання поточної погоди
async function getWeather(city) {
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=ua`;
  const res = await fetch(url);
  if (!res.ok) throw new Error("Місто не знайдено");
  return res.json();
}

// Отримання погодинного прогнозу
async function getForecast(city) {
  const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${API_KEY}&units=metric&lang=ua`;
  const res = await fetch(url);
  if (!res.ok) throw new Error("Не вдалося отримати прогноз");
  return res.json();
}

// Обробник кнопки пошуку
document.getElementById('searchBtn').addEventListener('click', async () => {
  const city = document.getElementById('city').value.trim();
  if (!city) return alert("Введіть назву міста");

  try {
    const weatherData = await getWeather(city);
    const forecastData = await getForecast(city);

    // Поточна погода
    document.getElementById('weather').innerHTML = `
      <h2>${weatherData.name}, ${new Date().toLocaleDateString()}</h2>
      <p>${weatherData.weather[0].description}</p>
      <img src="https://openweathermap.org/img/wn/${weatherData.weather[0].icon}@2x.png" alt="">
      <p>Температура: ${weatherData.main.temp}°C</p>
      <p>Мін: ${weatherData.main.temp_min}°C, Макс: ${weatherData.main.temp_max}°C</p>
      <p>Вітер: ${weatherData.wind.speed} м/с</p>
    `;

    // Погодинний прогноз (перші 6 записів = 18 годин)
    const forecastHTML = forecastData.list.slice(0, 6).map(item => `
      <div class="hour">
        <strong>${item.dt_txt.split(" ")[1].slice(0,5)}</strong><br>
        <img src="https://openweathermap.org/img/wn/${item.weather[0].icon}.png" alt="">
        <div>${item.weather[0].description}</div>
        <div>${item.main.temp}°C</div>
        <div>Вітер: ${item.wind.speed} м/с</div>
      </div>
    `).join("");

    document.getElementById('forecast').innerHTML = `<h3>Погодинний прогноз</h3>${forecastHTML}`;

  } catch (err) {
    alert(err.message);
  }
});
</script>

</body>
</html>
